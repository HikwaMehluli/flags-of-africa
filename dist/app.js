(()=>{var e={379:()=>{document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("menu-icon"),t=document.getElementById("sidebar"),s=document.getElementById("overlay"),n=document.querySelector(".game-container");e&&e.addEventListener("click",()=>{e.classList.toggle("open"),t.classList.toggle("open"),s.classList.toggle("open")}),s&&s.addEventListener("click",()=>{e.classList.remove("open"),t.classList.remove("open"),s.classList.remove("open"),n&&n.classList.remove("blur")})})},681:()=>{function e(e){const t="string"==typeof(s=e.region)&&s?s.split(" - ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" - "):"Unknown Region";var s;return`\n        <li>\n            <span class="player-name">${e.name}</span>\n            <span class="score-details">\n                ${e.moves} moves - ${e.time}\n            </span>\n            <span class="game-level">\n                ${e.difficulty} - ${t}\n            </span>\n        </li>\n    `}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("high-scores-list"),s=document.getElementById("no-scores-container");if(!t||!s)return void console.error("Required elements for scores display not found.");const n=JSON.parse(localStorage.getItem("highScores"))||[];n.length>0?(t.style.display="block",s.style.display="none",t.innerHTML=n.map(e).join("")):(t.style.display="none",s.style.display="block")})},771:()=>{class e{constructor(){this.cards=[],this.flippedCards=[],this.matchedPairs=0,this.moves=0,this.startTime=null,this.timer=null,this.gameStarted=!1,this.gameBoard=document.getElementById("game-board"),this.movesElement=document.getElementById("moves"),this.timeElement=document.getElementById("time"),this.nameModal=document.getElementById("name-modal"),this.nameForm=document.getElementById("name-form"),this.playerNameInput=document.getElementById("player-name"),this.modalFinalMoves=document.getElementById("modal-final-moves"),this.modalFinalTime=document.getElementById("modal-final-time"),this.closeModalButton=document.querySelector(".close-modal"),this.continent="africa",this.difficulty="easy",this.region="all",this.initializeSelectors(),this.updateRegionSelector().then(()=>{this.startNewGame()})}initializeSelectors(){const e=document.getElementById("continent-select"),t=document.getElementById("difficulty-select"),s=document.getElementById("region-select"),n=document.getElementById("new-game-btn"),a=document.getElementById("restart-btn");e.addEventListener("change",async e=>{this.continent=e.target.value,await this.updateRegionSelector(),this.startNewGame()}),t.addEventListener("change",e=>{this.difficulty=e.target.value,this.startNewGame()}),s.addEventListener("change",e=>{this.region=e.target.value,this.startNewGame()}),n.addEventListener("click",()=>this.startNewGame()),a.addEventListener("click",()=>this.restartGame()),this.nameForm&&this.nameForm.addEventListener("submit",e=>{e.preventDefault();const t=this.playerNameInput.value.trim();t&&(this.saveScore(t,this.moves,this.timeElement.textContent,this.difficulty,this.region),this.nameModal.style.display="none",this.playerNameInput.value="")}),this.closeModalButton&&this.closeModalButton.addEventListener("click",()=>{this.nameModal.style.display="none"}),this.nameModal&&this.nameModal.addEventListener("click",e=>{e.target===this.nameModal&&(this.nameModal.style.display="none")})}async updateRegionSelector(){const e=document.getElementById("region-select"),t=e.parentElement,s=t.querySelector(".selector-title"),n=document.querySelector(".game-title");e.innerHTML="";const a=this.continent.charAt(0).toUpperCase()+this.continent.slice(1);s.textContent="Select Region",n.textContent=`Flags of ${a}`;const i={africa:"dist/flags.json",europe:"dist/flags_europe.json"}[this.continent];if(i){t.style.display="block";try{const t=await fetch(i);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json(),n=document.createElement("option");n.value="all",n.textContent=`All of ${a}`,e.appendChild(n);const o={north:"North Africa",southern:"Southern Africa",east:"East Africa",west:"West Africa",central:"Central Africa"};for(const t in s){const s=document.createElement("option");s.value=t;let n="africa"===this.continent&&o[t]||t;s.textContent=n,e.appendChild(s)}this.region="all",e.value="all"}catch(e){console.error(`Error loading regions for ${this.continent}:`,e),t.style.display="none"}}else t.style.display="none"}async getFlags(){const e={africa:"dist/flags_africa.json",europe:"dist/flags_europe.json"}[this.continent];if(!e)return[];try{const t=await fetch(e),s=await t.json();return"all"===this.region?Object.values(s).flat():s[this.region]||[]}catch(e){return console.error("Error loading flag data:",e),[]}}getDifficultySettings(){return{easy:{rows:3,cols:4,pairs:6},medium:{rows:4,cols:4,pairs:8},hard:{rows:5,cols:4,pairs:10}}[this.difficulty]}async generateCards(){const{pairs:e}=this.getDifficultySettings();let t=await this.getFlags();t=this.shuffleArray(t);const s=[],n=t.slice(0,e);for(let t=0;t<e&&t<n.length;t++){const e=n[t];s.push(e,e)}return this.shuffleArray(s)}shuffleArray(e){const t=[...e];for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}async createGameBoard(){this.cards=await this.generateCards(),this.renderGameBoard()}renderGameBoard(){const{rows:e,cols:t}=this.getDifficultySettings();this.gameBoard.style.gridTemplateColumns=`repeat(${t}, 1fr)`,this.gameBoard.innerHTML="",this.cards.forEach((e,t)=>{const s=document.createElement("div");s.className="card",s.dataset.index=t,s.innerHTML=`\n                <div class="card-back">?</div>\n                <div class="card-front" data-tippy-content="${e.country}">\n                    ${e.flag}\n                </div>\n            `,s.addEventListener("click",()=>this.flipCard(s,t)),this.gameBoard.appendChild(s)}),this.initializeTooltips()}initializeTooltips(){tippy("[data-tippy-content]",{followCursor:!0})}flipCard(e,t){this.flippedCards.length>=2||e.classList.contains("flipped")||e.classList.contains("matched")||(this.gameStarted||(this.startTimer(),this.gameStarted=!0),e.classList.add("flipped"),this.flippedCards.push({element:e,country:this.cards[t].country,index:t}),2===this.flippedCards.length&&(this.moves++,this.movesElement.textContent=this.moves,setTimeout(()=>this.checkMatch(),1e3)))}checkMatch(){const[e,t]=this.flippedCards;e.country===t.country?(e.element.classList.add("matched"),t.element.classList.add("matched"),this.matchedPairs++,this.matchedPairs===this.getDifficultySettings().pairs&&this.gameWon()):(e.element.classList.remove("flipped"),t.element.classList.remove("flipped")),this.flippedCards=[]}startTimer(){this.startTime=Date.now(),this.timer=setInterval(()=>{const e=Math.floor((Date.now()-this.startTime)/1e3),t=Math.floor(e/60).toString().padStart(2,"0"),s=(e%60).toString().padStart(2,"0");this.timeElement.textContent=`${t}:${s}`},1e3)}stopTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)}gameWon(){this.stopTimer();const e=this.timeElement.textContent;this.nameModal&&(this.modalFinalMoves.textContent=this.moves,thisLAGs.modalFinalTime.textContent=e,this.nameModal.style.display="block")}saveScore(e,t,s,n,a){const i={name:e,moves:t,time:s,difficulty:n,region:`${this.continent} - ${a}`},o=JSON.parse(localStorage.getItem("highScores"))||[];o.push(i),o.sort((e,t)=>e.moves-t.moves||e.time.localeCompare(t.time)),o.splice(10),localStorage.setItem("highScores",JSON.stringify(o))}resetGame(){this.stopTimer(),this.flippedCards=[],this.matchedPairs=0,this.moves=0,this.gameStarted=!1,this.movesElement.textContent="0",this.timeElement.textContent="00:00",this.nameModal&&(this.nameModal.style.display="none")}startNewGame(){this.resetGame(),this.createGameBoard()}async restartGame(){this.resetGame(),this.cards=this.shuffleArray([...this.cards]),await this.createGameBoard()}}window.addEventListener("DOMContentLoaded",()=>{new e})},972:()=>{document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle"),t=document.body,s=e=>{"dark"===e?t.classList.add("dark-mode"):t.classList.remove("dark-mode")},n=localStorage.getItem("theme");s(n||"light"),e.addEventListener("click",()=>{t.classList.contains("dark-mode")?(s("light"),localStorage.setItem("theme","light")):(s("dark"),localStorage.setItem("theme","dark"))})})}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";s(771),s(379),s(681),s(972)})()})();